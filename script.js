const jogos = {
  2017: [
     {
        nome: "Castlevania: Lords of Shadow 2",
        lancamento: 2014,
        concluido: "2017-04-22",
        genero: "Ação",
        subgenero: "Hack and Slash",
        tempo: 1572,
        nota: 6.9,
        plataforma: "Steam: PC",
        conquistas: "24/56"
      },
     {
        nome: "Age of Mythology: Extended Edition",
        lancamento: 2014,
        concluido: "2017-05-24",
        genero: "RTS",
        subgenero: "Construção de império",
        tempo: 1974,
        nota: 10,
        plataforma: "Steam: PC",
        conquistas: "NA"
      },
     {
        nome: "Mortal Kombat X",
        lancamento: 2015,
        concluido: "2017-10-18",
        genero: "Luta",
        subgenero: "Luta em 2.5D",
        tempo: 630,
        nota: 7,
        plataforma: "Steam: PC",
        conquistas: "13/73"
      },
{
        nome: "Watch Dogs",
        lancamento: 2014,
        concluido: "2017-11-26",
        genero: "Ação/Aventura",
        subgenero: "Mundo aberto",
        tempo: 1200,
        nota: 6.5,
        plataforma: "Ubisoft Connect: PC",
        conquistas: "6/49"
      },
  ],
  2018: [
     {
        nome: "The Witcher 3: Wild Hunt - Blood and Wine",
        lancamento: 2016,
        concluido: "2018-07-07",
        genero: "RPG",
        subgenero: "RPG de mundo aberto",
        tempo: 11028,
        nota: 10,
        plataforma: "Steam: PC",
        conquistas: "41/78"
      },
    ],
  2019:[
     {
        nome: "Assassin's Creed Origins",
        lancamento: 2017,
        concluido: "2019-05-09",
        genero: "Ação/Aventura",
        subgenero: "RPG de mundo aberto",
        tempo: 3202,
        nota: 9.5,
        plataforma: "Ubisoft Connect: PC",
        conquistas: "31/67"
      },
  ],
  2020: [
     {
        nome: "Naruto Shippuden: Ultimate Ninja Storm 4",
        lancamento: 2016,
        concluido: "2020-02-11",
        genero: "Luta",
        subgenero: "Arena Fighter cinematográfico",
        tempo: 1512,
        nota: 8,
        plataforma: "Steam: PC",
        conquistas: "20/53"
      },
     {
        nome: "Assassin's Creed Odyssey",
        lancamento: 2017,
        concluido: "2020-09-02",
        genero: "Ação/Aventura",
        subgenero: "RPG de mundo aberto",
        tempo: 6700,
        nota: 10,
        plataforma: "Ubisoft Connect: PC",
        conquistas: "73/93"
      },
     {
        nome: "Forza Horizon 4",
        lancamento: 2018,
        concluido: "2020-12-27",
        genero: "Corrida",
        subgenero: "Mundo aberto/Arcade de simulação",
        tempo: 1931,
        nota: 9,
        plataforma: "XBOX: PC",
        conquistas: "22/178"
      },
     {
        nome: "GreedFall",
        lancamento: 2019,
        concluido: "2020-12-29",
        genero: "RPG",
        subgenero: "RPG de ação narrativo",
        tempo: 2111,
        nota: 8,
        plataforma: "XBOX: PC",
        conquistas: "22/178"
      },
],
2021: [
     {
        nome: "The Medium",
        lancamento: 2021,
        concluido: "2021-02-15",
        genero: "Terror",
        subgenero: "Terror psicológico",
        tempo: 568,
        nota: 7.8,
        plataforma: "XBOX: PC",
        conquistas: "32/39"
      },
     {
        nome: "A Plague Tale: Innocence",
        lancamento: 2019,
        concluido: "2021-03-19",
        genero: "Aventura",
        subgenero: "Stealth cinematográfico",
        tempo: 749,
        nota: 8.1,
        plataforma: "XBOX: PC",
        conquistas: "22/35"
      },
     {
        nome: "Cyberpunk 2077",
        lancamento: 2020,
        concluido: "2021-06-01",
        genero: "RPG de ação",
        subgenero: "Mundo aberto futurista",
        tempo: 2948,
        nota: 9.0,
        plataforma: "GOG: PC",
        conquistas: "20/44"
      },
     {
        nome: "Code Vein",
        lancamento: 2019,
        concluido: "2021-07-27",
        genero: "RPG",
        subgenero: "Soulslike anime",
        tempo: 1850,
        nota: 8.7,
        plataforma: "XBOX: PC",
        conquistas: "28/43"
      },
     {
        nome: "Hades",
        lancamento: 2019,
        concluido: "2021-09-01",
        genero: "Ação/RPG",
        subgenero: "Roguelite",
        tempo: 3775,
        nota: 9.7,
        plataforma: "XBOX: PC",
        conquistas: "28/49"
      },
],      
2022:[
     {
        nome: "Dragon Quest XI S: Echos of an Elusive Age - Definitive Edition",
        lancamento: 2019,
        concluido: "2022-04-09",
        genero: "RPG",
        subgenero: "JRPG",
        tempo: 3391,
        nota: 10,
        plataforma: "XBOX: PC",
        conquistas: "33/57"
      },
     {
        nome: "Bloodstained: Ritual of the Night",
        lancamento: 2019,
        concluido: "2022-11-15",
        genero: "Ação/Plataforma",
        subgenero: "Metroidvania",
        tempo: 1338,
        nota: 8.6,
        plataforma: "Steam: PC",
        conquistas: "32/57"
      },
     {
        nome: "Super Mario 3D Land",
        lancamento: 2011,
        concluido: "2022-12-29",
        genero: "Plataforma",
        subgenero: "Plataforma 3D linear",
        tempo: 1322,
        nota: 9.5,
        plataforma: "3DS",
        conquistas: "NA"
      },
],      
2023:[
  {
        nome: "Hogwarts Legacy",
        lancamento: 2023,
        concluido: "2023-06-07",
        genero: "RPG de ação",
        subgenero: "Mundo aberto",
        tempo: 2873,
        nota: 9.5,
        plataforma: "Epic: PC",
        conquistas: "25/45"
      },
  ],
2024: [
     {
        nome: "Marvel War of the gems",
        lancamento: 1996,
        concluido: "2024-05-1",
        genero: "Luta",
        subgenero: "Beat 'em up",
        tempo: 60,
        nota: 10,
        plataforma: "SNES: Steam Deck",
        conquistas: "22/84"
      },
      {
        nome: "Ultimate Marvel vs Capcom 3",
        lancamento: 2011,
        concluido: "2024-05-9",
        genero: "Luta",
        subgenero: "Luta 2D",
        tempo: 540,
        nota: 8.2,
        plataforma: "Steam: Steam Deck",
        conquistas: "3/47"
      },
      {
        nome: "Hades",
        lancamento: 2020,
        concluido: "2024-05-15",
        genero: "Ação/RPG",
        subgenero: "Roguelite",
        tempo: 1320,
        nota: 9.7,
        plataforma: "Switch: Steam Deck",
        conquistas: "NA"
      },
      {
        nome: "Senua’s Saga: Hellblade II",
        lancamento: 2024,
        concluido: "2024-06-1",
        genero: "Aventura",
        subgenero: "Aventura psicológica",
        tempo: 560,
        nota: 7,
        plataforma: "XBOX Game Pass: PC",
        conquistas: "7/11"
      },
      {
        nome: "100 Space Cats",
        lancamento: 2024,
        concluido: "2024-06-2",
        genero: "Puzzle",
        subgenero: "Puzzle",
        tempo: 11,
        nota: 6,
        plataforma: "Steam: PC",
        conquistas: "100/100"
      },
      {
        nome: "Lies of P",
        lancamento: 2023,
        concluido: "2024-08-2",
        genero: "Ação/RPG",
        subgenero: "Soulslike",
        tempo: 565,
        nota: 9,
        plataforma: "XBOX Game Pass: PC",
        conquistas: "27/42"
      },
      {
        nome: "X-Men – Mutant Apocalypse",
        lancamento: 1994,
        concluido: "2024-08-6",
        genero: "Luta",
        subgenero: "Beat 'em up",
        tempo: 300,
        nota: 6,
        plataforma: "SNES: Steam Deck",
        conquistas: "5/12"
      },
      {
        nome: "Show do Milhão",
        lancamento: 1999,
        concluido: "2024-08-12",
        genero: "Quiz",
        subgenero: "Talkshow",
        tempo: 30,
        nota: 7,
        plataforma: "Genesis: Steam Deck",
        conquistas: "21/21"
      },
      {
      nome: "Show do Milhão 2",
      lancamento: 2002,
      concluido: "2024-08-13",
      genero: "Quiz",
      subgenero: "Talkshow",
      tempo: 35,
      nota: 7,
      plataforma: "Genesis: Steam Deck",
      conquistas: "8/14"
      },
      {
        nome: "The Elder Scrolls V: Skyrim SE",
        lancamento: 2016,
        concluido: "2024-09-21",
        genero: "RPG",
        subgenero: "RPG de mundo aberto",
        tempo: 9180,
        nota: 9.5,
        plataforma: "Steam: Steam Deck/PC",
        conquistas: "75/75"
        },
    {
        nome: "Super Bomberman 4",
        lancamento: 1996,
        concluido: "2024-10-24",
        genero: "Ação",
        subgenero: "Puzzle arena",
        tempo: 150,
        nota: 10,
        plataforma: "SNES: Steam Deck",
        conquistas: "19/37"
    },
        {
        nome: "Vampire Survivors",
        lancamento: 2021,
        concluido: "?",
        genero: "Ação",
        subgenero: "Roguelite/Bullet Hell",
        tempo: 2685,
        nota: 8,
        plataforma: "EPIC: Steam Deck/PC",
        conquistas: "170/220"
        },
      ],
      2025: [
    {
        nome: "Detroit: Become Human",
        lancamento: 2019,
        concluido: "2025-02-26",
        genero: "Aventura",
        subgenero: "Drama interativo",
        tempo: 720,
        nota: 10,
        plataforma: "Steam: PC",
        conquistas: "26/48"
      },
      {
        nome: "Moonlighter",
        lancamento: 2018,
        concluido: "2025-03-25",
        genero: "Ação/RPG",
        subgenero: "Roguelite/Gestão de loja",
        tempo: 1056,
        nota: 7.5,
        plataforma: "GOG: Steam Deck",
        conquistas: "NA"
      },      
    {
      nome: "Tales of Kenzera: Zau",
      lancamento: 2024,
      concluido: "2025-04-05",
      genero: "Ação/Aventura",
      subgenero: "Metroidvania",
      tempo: 669,
      nota: 10,
      plataforma: "EA: PC",
      conquistas: "19/19"
    },
    {
      nome: "Final Fight 3",
      lancamento: 1995,
      concluido: "2025-04-21",
      genero: "Ação",
      subgenero: "Beat 'em up",
      tempo: 57,
      nota: 6.5,
      plataforma: "SNES: Steam Deck",
      conquistas: "18/57"
    },
    ,
   {
      nome: "BioShock Remastered",
      lancamento: 2016,
      concluido: "2025-04-27",
      genero: "FPS",
      subgenero: "FPS com elementos de RPG",
      tempo: 996,
      nota: 8,
      plataforma: "GOG: PC",
      conquistas: "26/65"
    },
    {
      nome: "Balatro",
      lancamento: 2024,
      concluido: "2025-05-11",
      genero: "Estratégia",
      subgenero: "Roguelite/Deckbuilder",
      tempo: 1584,
      nota: 8,
      plataforma: "XBOX: PC",
      conquistas: "14/31"
    },
    {
      nome: "Asura's Wrath",
      lancamento: 2012,
      concluido: "2025-05-25",
      genero: "Ação",
      subgenero: "Anime interativo",
      tempo: 340,
      nota: 6,
      plataforma: "XBOX360: XBOX One X",
      conquistas: "28/53"
    },
    {
      nome: "The Elder Scrolls IV: Oblivion Remastered",
      lancamento: 2025,
      concluido: "2025-05-29",
      genero: "RPG",
      subgenero: "RPG de mundo aberto",
      tempo: 3505,
      nota: 8,
      plataforma: "XBOX: PC",
      conquistas: "35/60"
    },
    {
      nome: "Clair Obscur: Expedition 33",
      lancamento: 2025,
      concluido: "2025-06-17",
      genero: "RPG",
      subgenero: "RPG de turnos com mecânicas em tempo real",
      tempo: 3054,
      nota: 10,
      plataforma: "XBOX: PC",
      conquistas: "47/55"
    },
    {
      nome: "Mario Kart 8 Deluxe",
      lancamento: 2017,
      concluido: "2025-06-29",
      genero: "Corrida",
      subgenero: "Kart racing arcade",
      tempo: 315,
      nota: 10,
      plataforma: "Switch: Steam Deck",
      conquistas: "NA"
    },
    {
      nome: "Lost in Random: The Eternal Die",
      lancamento: 2025,
      concluido: "2025-07-31",
      genero: "Ação/RPG",
      subgenero: "Roguelite",
      tempo: 528,
      nota: 5.5,
      plataforma: "XBOX: PC",
      conquistas: "24/41"
    },
    {
      nome: "Dante's Inferno",
      lancamento: 2010,
      concluido: "2025-08-16",
      genero: "Ação",
      subgenero: "Hack and slash",
      tempo: 417,
      nota: 7,
      plataforma: "XBOX360: XBOX One X",
      conquistas: "28/54"
    },
    {
      nome: "Resident Evil: Village",
      lancamento: 2021,
      concluido: "2025-08-26",
      genero: "Survival horror",
      subgenero: "Horror em primeira pessoa",
      tempo: 694,
      nota: 9,
      plataforma: "XBOX One X",
      conquistas: "24/56"
    },
    {
      nome: "EA FC 25",
      lancamento: 2024,
      concluido: "2025-10-14",
      genero: "Esporte",
      subgenero: "Futebol",
      tempo: 11551,
      nota: 7.5,
      plataforma: "XBOX One X",
      conquistas: "21/39"
    },
    {
      nome: "Assassin's Creed Mirage",
      lancamento: 2023,
      concluido: "2025-09-26",
      genero: "Ação/Aventura",
      subgenero: "Stealth",
      tempo: 1369,
      nota: 4.5,
      plataforma: "XBOX One X",
      conquistas: "27/50"
    },
    {
      nome: "Little Nightmares II",
      lancamento: 2025,
      concluido: "2025-10-05",
      genero: "Aventura",
      subgenero: "Terror psicológico/plataforma puzzle",
      tempo: 390,
      nota: 7.7,
      plataforma: "XBOX: PC",
      conquistas: "7/35"
    },
    {
      nome: "Marvel Cosmic Invasion",
      lancamento: 2025,
      concluido: "2025-12-04",
      genero: "Ação",
      subgenero: "Beat 'em up",
      tempo: 463,
      nota: 8,
      plataforma: "XBOX: PC/Xbox One X/Steam Deck",
      conquistas: "15/35"
    },
    {
      nome: "Gears of War: Reloaded",
      lancamento: 2025,
      concluido: "2025-12-16",
      genero: "Ação",
      subgenero: "Shooter em terceira pessoa",
      tempo: 562,
      nota: 7,
      plataforma: "XBOX: Steam Deck (nuvem)",
      conquistas: "28/56"
    },
    ],
    2026: [
   {
      nome: "Elden Ring",
      lancamento: 2022,
      concluido: "2026-01-07",
      genero: "RPG",
      subgenero: "Soulslike (mundo aberto)",
      tempo: 6480,
      nota: 10,
      plataforma: "XBOX One X",
      conquistas: "42/42"
    },
    {
      nome: "Mortal Kombat 1",
      lancamento: 2023,
      concluido: "2026-01-07",
      genero: "Luta",
      subgenero: "Luta 2.5D",
      tempo: 386,
      nota: 6.5,
      plataforma: "Xbox: Steam Deck (nuvem)",
      conquistas: "3/50"
    },
    {
      nome: "RE 2 Remake (A/B)",
      lancamento: 2019,
      concluido: "2026-01-12",
      genero: "Ação/Aventura",
      subgenero: "Shooter de terror em terceira pessoa",
      tempo: 654,
      nota: 7.9,
      plataforma: "XBOX One X",
      conquistas: "33/44"
    },
    {
      nome: "RE 3 Remake",
      lancamento: 2020,
      concluido: "2026-01-20",
      genero: "Ação",
      subgenero: "Shooter de terror em terceira pessoa",
      tempo: 1308,
      nota: 8.5,
      plataforma: "XBOX One X",
      conquistas: "32/32"
    },
    {
      nome: "Ryse: Son of Rome",
      lancamento: 2013,
      concluido: "2026-01-24",
      genero: "Aventura",
      subgenero: "Brawler",
      tempo: 420,
      nota: 6,
      plataforma: "XBOX One X",
      conquistas: "27/76"
    },
    {
      nome: "Indika",
      lancamento: 2024,
      concluido: "2026-02-02",
      genero: "Aventura",
      subgenero: "Puzzle Narrativo Psicológico",
      tempo: 255,
      nota: 7.5,
      plataforma: "Xbox: Steam Deck (nuvem)",
      conquistas: "16/16"
    },
    {
      nome: "Ball x Pit",
      lancamento: 2025,
      concluido: "2026-02-12",
      genero: "Arcade",
      subgenero: "Shooter Roguelite",
      tempo: 1981,
      nota: 9,
      plataforma: "Xbox: PC/Steam Deck (nuvem)",
      conquistas: "63/63"
    },
    ]
};
  
function renderizarJogos(lista) {
  const container = document.getElementById("jogosContainer");
  container.innerHTML = "";

  lista.forEach(jogo => {
    const div = document.createElement("div");
    div.classList.add("jogo");

    const card = document.createElement("div");
    card.className = "card";

    if (jogo.conquistas && jogo.conquistas.includes("/")) {
      const [feitas, total] = jogo.conquistas.split("/").map(n => Number(String(n).trim()));
      if (Number.isFinite(feitas) && Number.isFinite(total) && total > 0 && feitas === total) {
        card.classList.add("platinado");

        const selo = document.createElement("span");
        selo.classList.add("selo-platina");
        selo.textContent = "100%";
        card.appendChild(selo);

        const trofeu = document.createElement("img");
        trofeu.src = "imagens/trofeu-platina.png";
        trofeu.alt = "Troféu de Platina";
        trofeu.classList.add("trofeu-platina");
        card.appendChild(trofeu);
      }
    }

    const titulo = document.createElement("h3");
    titulo.textContent = jogo.nome;
    card.appendChild(titulo);

    const detalhes = [
      ["Data de Lançamento", jogo.lancamento],
      ["Concluído em", jogo.concluido],
      ["Gênero", `${jogo.genero} - ${jogo.subgenero}`],
      ["Tempo", `${jogo.tempo} min`],
      ["Nota", jogo.nota],
      ["Plataforma", jogo.plataforma],
      ["Conquistas", jogo.conquistas]
    ];

    detalhes.forEach(([label, valor]) => {
      const p = document.createElement("p");
      p.innerHTML = `<strong>${label}:</strong> ${valor}`;
      card.appendChild(p);
    });

    div.appendChild(card);
    container.appendChild(div);
  });
}

function isPlatinado(conquistas) {
  if (!conquistas) return false;
  const m = String(conquistas).trim().match(/^(\d+)\s*\/\s*(\d+)$/);
  if (!m) return false;

  const atual = parseInt(m[1], 10);
  const total = parseInt(m[2], 10);

  if (!Number.isFinite(atual) || !Number.isFinite(total) || total <= 0) return false;

  return atual === total;
}

function filtrarJogos() {
  const anoSelecionado = document.getElementById("filtroLancamento").value;
  const nota = document.getElementById("filtroNota").value;
  const tempo = document.getElementById("filtroTempo").value;
  const platina = document.getElementById("filtroPlatina").value;

  let filtrados = [];

  if (anoSelecionado === "todos") {
    for (const ano in jogos) {
      filtrados = filtrados.concat(jogos[ano] || []);
    }
  } else {
    filtrados = jogos[anoSelecionado] || [];
  }

if (nota !== "todas") {
  const notaSel = Number(nota);
  filtrados = filtrados.filter(j => Number(j.nota.toFixed(1)) === Number(notaSel.toFixed(1)));
}


  if (platina === "sim") {
    filtrados = filtrados.filter(j => isPlatinado(j.conquistas));
  } else if (platina === "nao") {
    filtrados = filtrados.filter(j => !isPlatinado(j.conquistas));
  }
  // se for "todos", não filtra nada

  if (tempo === "curto") {
    filtrados = [...filtrados].sort((a, b) => a.tempo - b.tempo);
  } else if (tempo === "longo") {
    filtrados = [...filtrados].sort((a, b) => b.tempo - a.tempo);
  }

  renderizarJogos(filtrados);
}

document.getElementById("filtroLancamento").addEventListener("change", filtrarJogos);
document.getElementById("filtroNota").addEventListener("change", filtrarJogos);
document.getElementById("filtroTempo").addEventListener("change", filtrarJogos);
document.getElementById("filtroPlatina").addEventListener("change", filtrarJogos);

document.getElementById("adicionarJogo").addEventListener("submit", e => {
  e.preventDefault();

  const nome = document.getElementById("nome").value;
  const lancamento = parseInt(document.getElementById("lancamento").value);
  const concluido = document.getElementById("concluido").value;
  const genero = document.getElementById("genero").value;
  const subgenero = document.getElementById("subgenero").value;
  const tempo = parseInt(document.getElementById("tempo").value);
  const nota = parseFloat(document.getElementById("nota").value);
  const plataforma = document.getElementById("plataforma").value;
  const conquistas = document.getElementById("conquistas").value;

  const jogoNovo = {
    nome,
    lancamento,
    concluido,
    genero,
    subgenero,
    tempo,
    nota,
    plataforma,
    conquistas
  };

  const anoConclusao = concluido ? concluido.slice(0, 4) : String(new Date().getFullYear());

  if (!jogos[anoConclusao]) jogos[anoConclusao] = [];
  jogos[anoConclusao].push(jogoNovo);

  document.getElementById("adicionarJogo").reset();

  popularFiltroLancamento();
  popularFiltroNota();

  filtrarJogos();
});

function popularFiltroNota() {
  const filtro = document.getElementById("filtroNota");
  let notasUnicas = new Set();

  for (const ano in jogos) {
    (jogos[ano] || []).forEach(jogo => notasUnicas.add(jogo.nota));
  }

  const notasOrdenadas = [...notasUnicas].sort((a, b) => b - a);
  filtro.innerHTML = '<option value="todas">Todas</option>';

  notasOrdenadas.forEach(nota => {
    const option = document.createElement("option");
    option.value = nota;
    option.textContent = nota;
    filtro.appendChild(option);
  });
}

function popularFiltroLancamento() {
  const filtro = document.getElementById("filtroLancamento");
  const anosUnicos = Object.keys(jogos).sort((a, b) => b - a);

  filtro.innerHTML = '<option value="todos">Todos</option>';
  anosUnicos.forEach(ano => {
    const option = document.createElement("option");
    option.value = ano;
    option.textContent = ano;
    filtro.appendChild(option);
  });
}

popularFiltroLancamento();
popularFiltroNota();
renderizarJogos(jogos[2026]);
 // Mostra os jogos de 2026 ao carregar a página;